{"remainingRequest":"D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\babel-loader\\lib\\index.js!D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\bishe\\filmsystem\\vue_spring_demo\\src\\components\\Header.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\bishe\\filmsystem\\vue_spring_demo\\src\\components\\Header.vue","mtime":1689521767475},{"path":"D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680194717698},{"path":"D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1680194719740},{"path":"D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680194717698},{"path":"D:\\bishe\\filmsystem\\vue_spring_demo\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1680194706607}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHNlc3Npb25TdG9yYWdlIGZyb20gIi4uL3V0aWxzL3N0b3JhZ2UiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhlYWRlciIsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICB1c2VybmFtZTogIiIKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnVzZXIgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBleGl0OiBmdW5jdGlvbiBleGl0KCkgewogICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9LAogICAgdXBsb2FkU3VjY2VzczogZnVuY3Rpb24gdXBsb2FkU3VjY2VzcyhyZXNwb25zZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB0aGlzLnVzZXIuaGVhZGVyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KHRoaXMudXNlcikpOwogICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC91c2VyIiwgdGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gIjIwMCIpIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAiIOS4iuS8oOaIkOWKnyIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:\\bishe\\filmsystem\\vue_spring_demo\\src\\components\\Header.vue"],"names":[],"mappings":"AA+EA,OAAO,cAAP,MAA2B,kBAA3B;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,UAAU,EAAE,EAFC;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AACJ,QAAA,QAAQ,EAAE;AADN;AADD,KAAP;AAKD,GATY;AAWb,EAAA,OAXa,qBAWH;AACR,SAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,cAAc,CAAC,OAAf,CAAuB,MAAvB,CAAX,CAAZ;AACD,GAbY;AAeb,EAAA,OAAO,EAAE;AACP,IAAA,IADO,kBACA;AACL,MAAA,cAAc,CAAC,KAAf;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,KAJM;AAKP,IAAA,aALO,yBAKO,QALP,EAKiB;AAAA;;AACtB,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,WAAK,IAAL,CAAU,MAAV,GAAmB,QAAQ,CAAC,IAA5B;AACA,MAAA,cAAc,CAAC,OAAf,CAAuB,MAAvB,EAA+B,IAAI,CAAC,SAAL,CAAe,KAAK,IAApB,CAA/B;AACA,MAAA,KAAK,CAAC,GAAN,CAAU,4BAAV,EAAwC,KAAK,IAA7C,EAAmD,IAAnD,CAAwD,UAAC,GAAD,EAAS;AAC/D,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,YAAI,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,KAAtB,EAA6B;AAC3B,UAAA,KAAI,CAAC,QAAL,CAAc;AACZ,YAAA,IAAI,EAAE,SADM;AAEZ,YAAA,OAAO,EAAE;AAFG,WAAd;AAIF,SALA,MAKO;AACL,UAAA,KAAI,CAAC,QAAL,CAAc;AACZ,YAAA,IAAI,EAAE,OADM;AAEZ,YAAA,OAAO,EAAE,GAAG,CAAC;AAFD,WAAd;AAIF;AACD,OAbD;AAcD;AAvBM;AAfI,CAAf","sourcesContent":["<template>\r\n  <div\r\n    style=\"\r\n      height: 55px;\r\n      line-height: 55px;\r\n      display: flex;\r\n      border-bottom: 5px solid;\r\n      border-image: linear-gradient(to bottom,transparent,#999999 50%,transparent)30 30;\r\n    \"\r\n  >\r\n    <div style=\"width: 60px\">\r\n      <img\r\n        src=\"@/assets/icon/film.jpg\"\r\n        style=\"width: 60px; height: 50px; padding-left: 10px\"\r\n      />\r\n    </div>\r\n    <div\r\n      style=\"\r\n        width: 200px;\r\n        padding-left: 10px;\r\n        font-weight: bold;\r\n        color: dodgerblue;\r\n      \"\r\n    >\r\n      电影推荐综合系统\r\n    </div>\r\n    <div style=\"flex: 1\"></div>\r\n    <div style=\"width: 50px; margin-right: 20px\">\r\n      <el-dropdown>\r\n\r\n          <div class=\"border\">\r\n            <!-- {{ headTip }}<img :src=\"imgsrc\" class=\"imgDiv\" /> -->\r\n            <el-image\r\n              style=\"width: 48px; height: 48px;\"\r\n              class=\"imgDiv\"\r\n              :src=\"user.header\"\r\n              :preview-src-list=\"[user.header]\"\r\n            >\r\n            </el-image>\r\n          </div>\r\n   \r\n        <template #dropdown>\r\n          <el-dropdown-menu>\r\n            <el-dropdown-item>\r\n              <el-upload\r\n                class=\"upload-demo\"\r\n                action=\"http://localhost:9090/files/upload\"\r\n                :on-success=\"uploadSuccess\"\r\n              >\r\n                <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n              </el-upload>\r\n            </el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </template>\r\n      </el-dropdown>\r\n    </div>\r\n    <div style=\"width: 100px; margin-right: 30px\">\r\n      <el-dropdown>\r\n        <span\r\n          class=\"el-dropdown-link\"\r\n          style=\"font-weight: bold; color: dodgerblue\"\r\n          >{{ user.role }}<i class=\"el-icon-arrow-down el-icon--right\"></i\r\n        ></span>\r\n        <template #dropdown>\r\n          <el-dropdown-menu>\r\n            <el-dropdown-item>\r\n              <span @click=\"this.$router.push('/person')\">个人信息</span>\r\n            </el-dropdown-item>\r\n            <el-dropdown-item>\r\n              <span @click=\"exit\">安全退出</span>\r\n            </el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </template>\r\n      </el-dropdown>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport sessionStorage from \"../utils/storage\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Header\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      user: {\r\n        username: \"\",\r\n      },\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.user = JSON.parse(sessionStorage.getItem(\"user\"));\r\n  },\r\n\r\n  methods: {\r\n    exit() {\r\n      sessionStorage.clear();\r\n      this.$router.push(\"/login\");\r\n    },\r\n    uploadSuccess(response) {\r\n      console.log(response);\r\n      this.user.header = response.data;\r\n      sessionStorage.setItem(\"user\", JSON.stringify(this.user));\r\n      axios.put(\"http://localhost:9090/user\", this.user).then((res) => {\r\n        console.log(res);\r\n        if (res.data.code === \"200\") {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \" 上传成功\",\r\n          });\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg,\r\n          });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  display: inline-block;\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  border: 1px solid #c3c3c3;\r\n  overflow: hidden;\r\n  line-height: 5rem;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n.imgDiv {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  border-radius: 50%;\r\n  -webkit-border-radius: 50%;\r\n  -moz-border-radius: 50%;\r\n  z-index: -1;\r\n}\r\n</style>"],"sourceRoot":""}]}