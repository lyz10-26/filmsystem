{"remainingRequest":"D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\babel-loader\\lib\\index.js!D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\毕设\\filmsystem\\vue_spring_demo\\src\\components\\Header.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\毕设\\filmsystem\\vue_spring_demo\\src\\components\\Header.vue","mtime":1681039274717},{"path":"D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680194717698},{"path":"D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1680194719740},{"path":"D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680194717698},{"path":"D:\\毕设\\filmsystem\\vue_spring_demo\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1680194706607}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHNlc3Npb25TdG9yYWdlIGZyb20gIi4uL3V0aWxzL3N0b3JhZ2UiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhlYWRlciIsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICB1c2VybmFtZTogIiIKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnVzZXIgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBleGl0OiBmdW5jdGlvbiBleGl0KCkgewogICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9LAogICAgdXBsb2FkU3VjY2VzczogZnVuY3Rpb24gdXBsb2FkU3VjY2VzcyhyZXNwb25zZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB0aGlzLnVzZXIuaGVhZGVyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KHRoaXMudXNlcikpOwogICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC91c2VyIiwgdGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gIjAiKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIiDkuIrkvKDmiJDlip8iCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["D:\\毕设\\filmsystem\\vue_spring_demo\\src\\components\\Header.vue"],"names":[],"mappings":"AA+EA,OAAO,cAAP,MAA2B,kBAA3B;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,UAAU,EAAE,EAFC;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AACJ,QAAA,QAAQ,EAAE;AADN;AADD,KAAP;AAKD,GATY;AAWb,EAAA,OAXa,qBAWH;AACR,SAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,cAAc,CAAC,OAAf,CAAuB,MAAvB,CAAX,CAAZ;AACD,GAbY;AAeb,EAAA,OAAO,EAAE;AACP,IAAA,IADO,kBACA;AACL,MAAA,cAAc,CAAC,KAAf;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,KAJM;AAKP,IAAA,aALO,yBAKO,QALP,EAKiB;AAAA;;AACtB,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,WAAK,IAAL,CAAU,MAAV,GAAmB,QAAQ,CAAC,IAA5B;AACA,MAAA,cAAc,CAAC,OAAf,CAAuB,MAAvB,EAA+B,IAAI,CAAC,SAAL,CAAe,KAAK,IAApB,CAA/B;AACA,MAAA,KAAK,CAAC,GAAN,CAAU,4BAAV,EAAwC,KAAK,IAA7C,EAAmD,IAAnD,CAAwD,UAAC,GAAD,EAAS;AAC/D,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,YAAI,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,GAAtB,EAA2B;AACzB,UAAA,KAAI,CAAC,QAAL,CAAc;AACZ,YAAA,IAAI,EAAE,SADM;AAEZ,YAAA,OAAO,EAAE;AAFG,WAAd;AAIF,SALA,MAKO;AACL,UAAA,KAAI,CAAC,QAAL,CAAc;AACZ,YAAA,IAAI,EAAE,OADM;AAEZ,YAAA,OAAO,EAAE,GAAG,CAAC;AAFD,WAAd;AAIF;AACD,OAbD;AAcD;AAvBM;AAfI,CAAf","sourcesContent":["<template>\n  <div\n    style=\"\n      height: 55px;\n      line-height: 55px;\n      display: flex;\n      border-bottom: 5px solid;\n      border-image: linear-gradient(to bottom,transparent,#999999 50%,transparent)30 30;\n    \"\n  >\n    <div style=\"width: 60px\">\n      <img\n        src=\"@/assets/icon/aojiao.png\"\n        style=\"width: 60px; height: 50px; padding-left: 10px\"\n      />\n    </div>\n    <div\n      style=\"\n        width: 200px;\n        padding-left: 10px;\n        font-weight: bold;\n        color: dodgerblue;\n      \"\n    >\n      电影推荐综合系统\n    </div>\n    <div style=\"flex: 1\"></div>\n    <div style=\"width: 50px; margin-right: 20px\">\n      <el-dropdown>\n\n          <div class=\"border\">\n            <!-- {{ headTip }}<img :src=\"imgsrc\" class=\"imgDiv\" /> -->\n            <el-image\n              style=\"width: 48px; height: 48px;\"\n              class=\"imgDiv\"\n              :src=\"user.header\"\n              :preview-src-list=\"[user.header]\"\n            >\n            </el-image>\n          </div>\n   \n        <template #dropdown>\n          <el-dropdown-menu>\n            <el-dropdown-item>\n              <el-upload\n                class=\"upload-demo\"\n                action=\"http://localhost:9090/files/upload\"\n                :on-success=\"uploadSuccess\"\n              >\n                <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n              </el-upload>\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n    </div>\n    <div style=\"width: 100px; margin-right: 30px\">\n      <el-dropdown>\n        <span\n          class=\"el-dropdown-link\"\n          style=\"font-weight: bold; color: dodgerblue\"\n          >{{ user.role }}<i class=\"el-icon-arrow-down el-icon--right\"></i\n        ></span>\n        <template #dropdown>\n          <el-dropdown-menu>\n            <el-dropdown-item>\n              <span @click=\"this.$router.push('/person')\">个人信息</span>\n            </el-dropdown-item>\n            <el-dropdown-item>\n              <span @click=\"exit\">安全退出</span>\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n    </div>\n  </div>\n</template>\n\n<script>\nimport sessionStorage from \"../utils/storage\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"Header\",\n  components: {},\n  data() {\n    return {\n      user: {\n        username: \"\",\n      },\n    };\n  },\n\n  mounted() {\n    this.user = JSON.parse(sessionStorage.getItem(\"user\"));\n  },\n\n  methods: {\n    exit() {\n      sessionStorage.clear();\n      this.$router.push(\"/login\");\n    },\n    uploadSuccess(response) {\n      console.log(response);\n      this.user.header = response.data;\n      sessionStorage.setItem(\"user\", JSON.stringify(this.user));\n      axios.put(\"http://localhost:9090/user\", this.user).then((res) => {\n        console.log(res);\n        if (res.data.code === \"0\") {\n          this.$message({\n            type: \"success\",\n            message: \" 上传成功\",\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.border {\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  border: 1px solid #c3c3c3;\n  overflow: hidden;\n  line-height: 5rem;\n  text-align: center;\n  position: relative;\n}\n.imgDiv {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border-radius: 50%;\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  z-index: -1;\n}\n</style>"],"sourceRoot":""}]}